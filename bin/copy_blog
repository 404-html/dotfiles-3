#!/usr/bin/env python3

from datetime import date
from dateutil.relativedelta import relativedelta, MO, TU
import glob
import frontmatter
import sys
import pyperclip
import subprocess
import os.path

format = "%B %d"
path_format = "%Y-%m-%d"
today = date.today()
monday = today + relativedelta(weekday=MO(-1))
monday = monday.strftime(path_format)
tuesday = today + relativedelta(weekday=TU(-1))
tuesday = tuesday.strftime(path_format)

path = ('/home/wadeallen/Sites/2017_Church/_posts/{}-*.markdown'.format(monday))

if glob.glob(path):
	files = glob.glob(path)
	day = monday
else:
	path = ('/home/wadeallen/Sites/2017_Church/_posts/{}-*.markdown'.format(tuesday))
	files = glob.glob(path)
	day = tuesday

for file in files:
    f = open(file, 'r').read()
    blog = f.split('\n',9)[9]
    with open('/home/wadeallen/Dropbox/Textbits/blog-body.txt','w') as f:
        print(blog, file=f)

print ('Copied Blog from {} to clipboard'.format(day))



